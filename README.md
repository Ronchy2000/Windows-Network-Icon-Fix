[ğŸ‡¨ğŸ‡³ ä¸­æ–‡æ–‡æ¡£](#chinese) | [ğŸ‡ºğŸ‡¸ English](#english)

<a id="chinese"><a>
# Windows 10/11 ç½‘ç»œå›¾æ ‡ä¿®å¤å·¥å…·

![Windows](https://img.shields.io/badge/Windows-10/11-blue) ![çŠ¶æ€](https://img.shields.io/badge/çŠ¶æ€-å¯ç”¨-brightgreen) ![ç±»å‹](https://img.shields.io/badge/ç±»å‹-æ³¨å†Œè¡¨ä¿®å¤-orange) ![è®¸å¯](https://img.shields.io/badge/è®¸å¯-MIT-green)

## é—®é¢˜æ¦‚è¿°
æœ¬ä»“åº“æä¾›äº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œç”¨äºä¿®å¤Windows 10ç³»ç»Ÿä¸­ç½‘ç»œå›¾æ ‡é”™è¯¯æ˜¾ç¤ºä¸º"æœªè¿æ¥"ï¼ˆç°è‰²å°åœ°çƒï¼‰çš„é—®é¢˜ï¼Œå³ä½¿å®é™…ä¸Šå¯ä»¥æ­£å¸¸è®¿é—®äº’è”ç½‘ã€‚**æ­¤é—®é¢˜ä¸»è¦åœ¨ä¸­å›½å¤§é™†åœ°åŒºå‡ºç°ã€‚**

## å¿«é€Ÿä½¿ç”¨
> **æ³¨æ„**ï¼šæ­¤è„šæœ¬ä¼šåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­é‡å¯ç½‘ç»œé€‚é…å™¨ï¼Œè¯·ç¡®ä¿æ‰§è¡Œå‰æ²¡æœ‰é‡è¦çš„ç½‘ç»œä¼ è¾“ä»»åŠ¡æ­£åœ¨è¿›è¡Œã€‚

ç›´æ¥ä»[**Release**](https://github.com/Ronchy2000/Windows-Network-Icon-Fix/releases)é¡µé¢ä¸‹è½½æ‰¹å¤„ç†æ–‡ä»¶ï¼š
1. **ä»¥ç®¡ç†å‘˜èº«ä»½**è¿è¡Œ`modifyRegistryAndRestart.bat`
2. åœ¨"ç½‘ç»œå’ŒInternetè®¾ç½®"ä¸­é‡å¯"Windowsç½‘ç»œé€‚é…å™¨" ï¼ˆå¦‚æœä¸ä¼šçš„è¯ï¼Œå…³é—­è®¡ç®—æœºé‡å¯å³å¯ï¼‰

## å·¥ä½œåŸç†

### é—®é¢˜æˆå› 
ä»Windows 10 1607ç‰ˆæœ¬å¼€å§‹ï¼Œç³»ç»Ÿé€šè¿‡è®¿é—®`http://www.msftconnecttest.com/connecttest.txt`æ¥åˆ¤æ–­ç½‘ç»œè¿æ¥çŠ¶æ€ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œè®¿é—®è¯¥URLä¼šè¿”å›æ–‡æœ¬"Microsoft Connect Test"ï¼Œç³»ç»Ÿæ®æ­¤æ˜¾ç¤ºæ­£å¸¸çš„ç½‘ç»œè¿æ¥å›¾æ ‡ã€‚

è¿‘æœŸï¼Œç”±äºä¸­å›½å¤§é™†çš„ç½‘ç»œè¿è¥å•†(ISP)å¯¹æŸäº›å›½å¤–IPåœ°å€å®æ–½äº†é™åˆ¶ï¼Œå¯¼è‡´æ­¤è¿æ¥æµ‹è¯•å¤±è´¥ï¼Œç³»ç»Ÿè¯¯åˆ¤ä¸ºç½‘ç»œæœªè¿æ¥ã€‚

### è§£å†³æ–¹æ¡ˆ
Windows 10 1607ä¹‹å‰ç‰ˆæœ¬ä½¿ç”¨çš„URLæ˜¯`http://www.msftconnecttest.com/ncsi.txt`ï¼Œè¯¥URLç›®å‰ä»ç„¶æœ‰æ•ˆä¸”æœªè¢«ISPå±è”½ã€‚æœ¬å·¥å…·é€šè¿‡ä¿®æ”¹æ³¨å†Œè¡¨ï¼Œå°†ç³»ç»Ÿé…ç½®æ¢å¤ä¸ºä½¿ç”¨è¿™ä¸ªæ—§ç‰ˆURLã€‚

## æŠ€æœ¯ç»†èŠ‚

æ³¨å†Œè¡¨ä¿®æ”¹å†…å®¹ï¼š
- ä¿®æ”¹æ£€æµ‹URLä¸º`http://www.msftconnecttest.com/ncsi.txt`
- `EnableActiveProbing`å­—æ®µï¼š
  - å€¼ä¸º1ï¼šå¼€å¯ç½‘ç»œæ¢æµ‹
  - å€¼ä¸º0ï¼šå…³é—­ç½‘ç»œæ¢æµ‹

## å¸¸è§é—®é¢˜

### æ­¤é—®é¢˜å¯¹ç³»ç»Ÿæœ‰ä»€ä¹ˆå½±å“ï¼Ÿ
- ç½‘ç»œå›¾æ ‡æ˜¾ç¤ºå¼‚å¸¸ï¼ˆç°è‰²å°åœ°çƒï¼‰
- Microsoft Storeå’Œéƒ¨åˆ†å¾®è½¯åº”ç”¨å¯èƒ½æ— æ³•æ­£å¸¸ä½¿ç”¨
- ç³»ç»Ÿå¯èƒ½æç¤º"æ— Internetè®¿é—®æƒé™"

### ä½¿ç”¨æ­¤å·¥å…·æœ‰é£é™©å—ï¼Ÿ
> å¤‡ä»½ä¸æ¢å¤:
>æ‰“å¼€æ–‡ä»¶ -> ç½‘å›¾æ ‡æ³¨å†Œè¡¨(å¤‡ä»½).png -> ä¿®æ”¹æ³¨å†Œè¡¨ -> é‡å¯ç½‘ç»œé€‚é…å™¨

æœ¬å·¥å…·ä»…ä¿®æ”¹Windowsç½‘ç»œè¿æ¥æ£€æµ‹çš„URLé…ç½®ï¼Œä¸ä¼šå½±å“ç³»ç»Ÿå®‰å…¨æ€§æˆ–ç¨³å®šæ€§ã€‚å¦‚æœ‰é¡¾è™‘ï¼Œå¯ä»¥æ‰‹åŠ¨å¤‡ä»½æ³¨å†Œè¡¨åå†ä½¿ç”¨ã€‚


### ä¸ºä»€ä¹ˆæˆ‘çš„ç³»ç»Ÿçªç„¶å‡ºç°è¿™ä¸ªé—®é¢˜ï¼Ÿ
ç³»ç»Ÿæ›´æ–°åå¯èƒ½ä¼šé‡ç½®ç½‘ç»œè¿æ¥æ£€æµ‹çš„è®¾ç½®ã€‚å³ä½¿ç¦ç”¨äº†Windows Updateï¼Œç³»ç»Ÿåœ¨æŸäº›æƒ…å†µä¸‹ä»å¯èƒ½è‡ªåŠ¨æ›´æ–°ç»„ä»¶ã€‚

## å‚è€ƒèµ„æ–™
- [Windows 10ç½‘ç»œå›¾æ ‡æ˜¾ç¤ºé—®é¢˜è§£å†³æ–¹æ¡ˆ][ref1]
- [Windowsç½‘ç»œè¿æ¥æ£€æµ‹æœºåˆ¶åˆ†æ][ref2]

[release-link]: https://github.com/yourusername/repo-name/releases
[ref1]: https://blog.csdn.net/Ronchy_2000/article/details/142069148
[ref2]: https://blog.csdn.net/qq_45830323/article/details/129681354

---
[ğŸ‡¨ğŸ‡³ ä¸­æ–‡æ–‡æ¡£](#chinese) | [ğŸ‡ºğŸ‡¸ English](#english)

<a id="english"><a>
# Windows 10 Network Icon Fix Tool

![Windows](https://img.shields.io/badge/Windows-10/11-blue) ![çŠ¶æ€](https://img.shields.io/badge/çŠ¶æ€-å¯ç”¨-brightgreen) ![ç±»å‹](https://img.shields.io/badge/ç±»å‹-æ³¨å†Œè¡¨ä¿®å¤-orange) ![è®¸å¯](https://img.shields.io/badge/è®¸å¯-MIT-green)

## Problem Overview
This repository provides a solution for fixing the Windows 10 issue where the network icon incorrectly shows as "disconnected" (gray globe icon) even though you can successfully access the Internet. **This problem primarily occurs in mainland China.**

## Quick Usage
> **Note**: This script will restart your network adapter during execution. Please ensure no important network transfers are in progress before running it.

Download the batch file directly from the [**Release**](https://github.com/Ronchy2000/Windows-Network-Icon-Fix/releases) page:
1. Run `modifyRegistryAndRestart.bat` with administrator privileges
2. Restart the "Windows network adapter" in "Network & Internet settings" (If you don't know how to do this, simply restart your computer)

## How It Works

### Cause of the Problem
Since Windows 10 version 1607, the system determines network status by accessing `http://www.msftconnecttest.com/connecttest.txt`. Under normal circumstances, accessing this URL returns the text "Microsoft Connect Test", and the system displays the normal network connection icon accordingly.

Recently, due to restrictions implemented by mainland China's Internet Service Providers (ISPs) on certain foreign IP addresses, this connection test fails, causing the system to incorrectly identify the network as disconnected.

### Solution
Windows 10 versions prior to 1607 used the URL `http://www.msftconnecttest.com/ncsi.txt`, which is still effective and not blocked by ISPs. This tool modifies the registry to restore the system configuration to use this older URL.

## Technical Details

Registry modifications:
- Changes the detection URL to `http://www.msftconnecttest.com/ncsi.txt`
- `EnableActiveProbing` field:
  - Value 1: Enable network probing
  - Value 0: Disable network probing

## Frequently Asked Questions

### How does this issue affect my system?
- Abnormal network icon display (gray globe)
- Microsoft Store and some Microsoft applications may not function properly
- System may indicate "No Internet access"

### Is there any risk in using this tool?
> Backup and Recovery:
> Open file -> Network Icon Registry (Backup).png -> Modify registry -> Restart network adapter

This tool only modifies the URL configuration for Windows network connection detection and will not affect system security or stability. If concerned, you can manually backup the registry before using it.

### Why did this problem suddenly appear on my system?
System updates may reset network connection detection settings. Even if Windows Update is disabled, the system may still automatically update components under certain circumstances.

## References
- [Windows 10 Network Icon Display Problem Solution][ref1]
- [Windows Network Connection Detection Mechanism Analysis][ref2]

[release-link]: https://github.com/yourusername/repo-name/releases
[ref1]: https://blog.csdn.net/Ronchy_2000/article/details/142069148
[ref2]: https://blog.csdn.net/qq_45830323/article/details/129681354

